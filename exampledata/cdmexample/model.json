{"name":"Dataflow partitions example","description":"","version":"1.0","pbi:mashup":{"fastCombine":true,"allowNativeQueries":false,"document":"section Section1;\r\n\r\nshared Customers = let\r\n    Source = OData.Feed(\"https://services.odata.org/V2/Northwind/Northwind.svc\"),\r\n    #\"Navigation 1\" = Source{[Name = \"Customers\", Signature = \"table\"]}[Data],\r\n    #\"Remove columns\" = Table.RemoveColumns(#\"Navigation 1\", Table.ColumnsOfType(#\"Navigation 1\", {type table, type record, type list, type nullable binary, type binary, type function}))\r\nin\r\n    #\"Remove columns\";\r\n\r\nshared Employees = let\r\n    Source = OData.Feed(\"https://services.odata.org/V2/Northwind/Northwind.svc\"),\r\n    #\"Navigation 1\" = Source{[Name = \"Employees\", Signature = \"table\"]}[Data],\r\n    #\"Remove columns\" = Table.RemoveColumns(#\"Navigation 1\", Table.ColumnsOfType(#\"Navigation 1\", {type table, type record, type list, type nullable binary, type binary, type function}))\r\nin\r\n    #\"Remove columns\";\r\n\r\nshared Actions = let\r\n    Source = Sql.Database(\"cdsaincrementalrefresh.database.windows.net\", \"cdsa_incremental_refresh_source\"),\r\n    #\"Navigation 1\" = Source{[Schema = \"dbo\", Item = \"Actions\"]}[Data],\r\n    #\"Actions-4372656174656454696D65-autogenerated_for_incremental_refresh\" = Table.SelectRows(#\"Navigation 1\", each DateTime.From([CreatedTime]) >= RangeStart and DateTime.From([CreatedTime]) < RangeEnd)\r\nin\r\n    #\"Actions-4372656174656454696D65-autogenerated_for_incremental_refresh\";\r\n\r\nshared Actions_Canary = let\r\n    Source = Sql.Database(\"cdsaincrementalrefresh.database.windows.net\", \"cdsa_incremental_refresh_source\"),\r\n    #\"Navigation 1\" = Source{[Schema = \"dbo\", Item = \"Actions\"]}[Data],\r\n    #\"Actions-4372656174656454696D65-autogenerated_for_incremental_refresh\" = Table.SelectRows(#\"Navigation 1\", each DateTime.From([CreatedTime]) >= RangeStart and DateTime.From([CreatedTime]) < RangeEnd), #\"Actions_Canary-5570646174656454696D65-autogenerated_for_incremental_refresh\" = DateTime.ToText(Table.Max(#\"Actions-4372656174656454696D65-autogenerated_for_incremental_refresh\",each [UpdatedTime], [UpdatedTime=#datetime(0001,01,01,00,00,00)])[UpdatedTime]) in #\"Actions_Canary-5570646174656454696D65-autogenerated_for_incremental_refresh\";\r\n\r\nshared Orders = let\r\n    Source = Sql.Database(\"cdsaincrementalrefresh.database.windows.net\", \"cdsa_incremental_refresh_source\"),\r\n    #\"Navigation 1\" = Source{[Schema = \"dbo\", Item = \"Orders\"]}[Data],\r\n    #\"Orders-4F7264657244617465-autogenerated_for_incremental_refresh\" = Table.SelectRows(#\"Navigation 1\", each DateTime.From([OrderDate]) >= RangeStart and DateTime.From([OrderDate]) < RangeEnd)\r\nin\r\n    #\"Orders-4F7264657244617465-autogenerated_for_incremental_refresh\";\r\n\r\nshared RangeStart = let RangeStart = #datetime(0001,01,01,00,00,00) meta [IsParameterQuery=true, List={}, Type=\"DateTime\", IsParameterQueryRequired=true, Description=\"autogenerated_for_incremental_refresh\"] in RangeStart;\r\n\r\nshared RangeEnd = let RangeEnd = #datetime(9999,12,31,23,59,59) meta [IsParameterQuery=true, List={}, Type=\"DateTime\", IsParameterQueryRequired=true, Description=\"autogenerated_for_incremental_refresh\"] in RangeEnd;\r\n\r\n"},"annotations":[{"name":"pbi:QueriesMetadata","value":"{\"Actions\":{\"queryId\":\"526ac78c-4312-4bf5-9995-f7114ae92a3d\",\"queryName\":\"Actions\",\"queryGroupId\":null,\"entityName\":null,\"loadEnabled\":true},\"Actions_Canary\":{\"queryId\":\"66867565-a0ee-4e9d-b753-ac76a8fe64e6\",\"queryName\":\"Actions_Canary\",\"queryGroupId\":null,\"entityName\":null,\"loadEnabled\":false},\"Orders\":{\"queryId\":\"4bd2caf4-e3d9-4511-9adc-c2584d8420d2\",\"queryName\":\"Orders\",\"queryGroupId\":null,\"entityName\":null,\"loadEnabled\":true},\"RangeStart\":{\"queryId\":\"437f236c-1afa-4fe5-ade0-4896852c2591\",\"queryName\":\"RangeStart\",\"queryGroupId\":null,\"entityName\":null,\"loadEnabled\":false},\"RangeEnd\":{\"queryId\":\"578f17ae-bbff-4afe-99b2-28abc79d11e6\",\"queryName\":\"RangeEnd\",\"queryGroupId\":null,\"entityName\":null,\"loadEnabled\":false},\"Customers\":{\"queryId\":\"40e13e22-9844-4584-b970-5f1a02b9b0ce\",\"queryName\":\"Customers\",\"queryGroupId\":null,\"entityName\":null,\"loadEnabled\":true},\"Employees\":{\"queryId\":\"6f297897-98a0-4d74-8f64-518210f1924b\",\"queryName\":\"Employees\",\"queryGroupId\":null,\"entityName\":null,\"loadEnabled\":true}}"}],"entities":[{"$type":"LocalEntity","name":"Actions","description":"","pbi:refreshPolicy":{"$type":"IncrementalRefreshPolicy","locationPattern":"Actions/part.csv","rollingWindowGranularity":"year","rollingWindowPeriods":3,"incrementalGranularity":"day","incrementalPeriods":15,"incrementalPeriodsOffset":-1,"pollingQuery":"Actions_Canary"},"annotations":[{"name":"pbi:IncrementalRefreshDetectChangeAttribute","value":"UpdatedTime"},{"name":"pbi:IncrementalRefreshFilterByAttribute","value":"CreatedTime"}],"attributes":[{"name":"Id","dataType":"int64"},{"name":"ActionType","dataType":"int64"},{"name":"CreatedTime","dataType":"dateTime"},{"name":"UpdatedTime","dataType":"dateTime"}],"partitions":[{"name":"IncrementalRefreshPolicyPartition-2015","location":"https://cdsaincrementalrefresh.blob.core.windows.net:443/afa6242c-3162-4d68-8b23-e0843f8fec9c/Actions/part-2015.csv?snapshot=2018-08-16T09%3A11%3A17.5629752Z","pbi:refreshBookmark":"12/31/2015 6:00:00 PM","pbi:source":{"$type":"RangePolicyPartitionSource","start":"2015-01-01T00:00:00","end":"2016-01-01T00:00:00"}},{"name":"IncrementalRefreshPolicyPartition-2016","location":"https://cdsaincrementalrefresh.blob.core.windows.net:443/afa6242c-3162-4d68-8b23-e0843f8fec9c/Actions/part-2016.csv?snapshot=2018-08-16T09%3A11%3A02.2654269Z","pbi:refreshBookmark":"12/31/2016 6:00:00 PM","pbi:source":{"$type":"RangePolicyPartitionSource","start":"2016-01-01T00:00:00","end":"2017-01-01T00:00:00"}},{"name":"IncrementalRefreshPolicyPartition-2017","location":"https://cdsaincrementalrefresh.blob.core.windows.net:443/afa6242c-3162-4d68-8b23-e0843f8fec9c/Actions/part-2017.csv?snapshot=2018-08-16T09%3A11%3A09.8746604Z","pbi:refreshBookmark":"12/31/2017 6:00:00 PM","pbi:source":{"$type":"RangePolicyPartitionSource","start":"2017-01-01T00:00:00","end":"2018-01-01T00:00:00"}},{"name":"IncrementalRefreshPolicyPartition-2018Q1","location":"https://cdsaincrementalrefresh.blob.core.windows.net:443/afa6242c-3162-4d68-8b23-e0843f8fec9c/Actions/part-2018Q1.csv?snapshot=2018-08-16T09%3A10%3A59.5588515Z","pbi:refreshBookmark":"3/31/2018 6:00:00 PM","pbi:source":{"$type":"RangePolicyPartitionSource","start":"2018-01-01T00:00:00","end":"2018-04-01T00:00:00"}},{"name":"IncrementalRefreshPolicyPartition-2018Q2","location":"https://cdsaincrementalrefresh.blob.core.windows.net:443/afa6242c-3162-4d68-8b23-e0843f8fec9c/Actions/part-2018Q2.csv?snapshot=2018-08-16T09%3A11%3A12.6372884Z","pbi:refreshBookmark":"6/30/2018 6:00:00 PM","pbi:source":{"$type":"RangePolicyPartitionSource","start":"2018-04-01T00:00:00","end":"2018-07-01T00:00:00"}},{"name":"IncrementalRefreshPolicyPartition-2018Q307","location":"https://cdsaincrementalrefresh.blob.core.windows.net:443/afa6242c-3162-4d68-8b23-e0843f8fec9c/Actions/part-2018Q307.csv?snapshot=2018-08-16T09%3A10%3A58.9402642Z","pbi:refreshBookmark":"7/31/2018 6:00:00 PM","pbi:source":{"$type":"RangePolicyPartitionSource","start":"2018-07-01T00:00:00","end":"2018-08-01T00:00:00"}},{"name":"IncrementalRefreshPolicyPartition-2018Q30801","location":"https://cdsaincrementalrefresh.blob.core.windows.net:443/afa6242c-3162-4d68-8b23-e0843f8fec9c/Actions/part-2018Q30801.csv?snapshot=2018-08-16T09%3A11%3A15.0095458Z","pbi:refreshBookmark":"8/1/2018 6:00:00 PM","pbi:source":{"$type":"RangePolicyPartitionSource","start":"2018-08-01T00:00:00","end":"2018-08-02T00:00:00"}},{"name":"IncrementalRefreshPolicyPartition-2018Q30802","location":"https://cdsaincrementalrefresh.blob.core.windows.net:443/afa6242c-3162-4d68-8b23-e0843f8fec9c/Actions/part-2018Q30802.csv?snapshot=2018-08-16T09%3A11%3A05.4894943Z","pbi:refreshBookmark":"8/2/2018 6:00:00 PM","pbi:source":{"$type":"RangePolicyPartitionSource","start":"2018-08-02T00:00:00","end":"2018-08-03T00:00:00"}},{"name":"IncrementalRefreshPolicyPartition-2018Q30803","location":"https://cdsaincrementalrefresh.blob.core.windows.net:443/afa6242c-3162-4d68-8b23-e0843f8fec9c/Actions/part-2018Q30803.csv?snapshot=2018-08-16T09%3A10%3A57.3777772Z","pbi:refreshBookmark":"8/3/2018 6:00:00 PM","pbi:source":{"$type":"RangePolicyPartitionSource","start":"2018-08-03T00:00:00","end":"2018-08-04T00:00:00"}},{"name":"IncrementalRefreshPolicyPartition-2018Q30804","location":"https://cdsaincrementalrefresh.blob.core.windows.net:443/afa6242c-3162-4d68-8b23-e0843f8fec9c/Actions/part-2018Q30804.csv?snapshot=2018-08-16T09%3A11%3A04.6707153Z","pbi:refreshBookmark":"8/4/2018 6:00:00 PM","pbi:source":{"$type":"RangePolicyPartitionSource","start":"2018-08-04T00:00:00","end":"2018-08-05T00:00:00"}},{"name":"IncrementalRefreshPolicyPartition-2018Q30805","location":"https://cdsaincrementalrefresh.blob.core.windows.net:443/afa6242c-3162-4d68-8b23-e0843f8fec9c/Actions/part-2018Q30805.csv?snapshot=2018-08-16T09%3A11%3A17.0434800Z","pbi:refreshBookmark":"8/5/2018 6:00:00 PM","pbi:source":{"$type":"RangePolicyPartitionSource","start":"2018-08-05T00:00:00","end":"2018-08-06T00:00:00"}},{"name":"IncrementalRefreshPolicyPartition-2018Q30806","location":"https://cdsaincrementalrefresh.blob.core.windows.net:443/afa6242c-3162-4d68-8b23-e0843f8fec9c/Actions/part-2018Q30806.csv?snapshot=2018-08-16T09%3A10%3A59.0573748Z","pbi:refreshBookmark":"8/6/2018 6:00:00 PM","pbi:source":{"$type":"RangePolicyPartitionSource","start":"2018-08-06T00:00:00","end":"2018-08-07T00:00:00"}},{"name":"IncrementalRefreshPolicyPartition-2018Q30807","location":"https://cdsaincrementalrefresh.blob.core.windows.net:443/afa6242c-3162-4d68-8b23-e0843f8fec9c/Actions/part-2018Q30807.csv?snapshot=2018-08-16T09%3A11%3A16.1416229Z","pbi:refreshBookmark":"8/7/2018 6:00:00 PM","pbi:source":{"$type":"RangePolicyPartitionSource","start":"2018-08-07T00:00:00","end":"2018-08-08T00:00:00"}},{"name":"IncrementalRefreshPolicyPartition-2018Q30808","location":"https://cdsaincrementalrefresh.blob.core.windows.net:443/afa6242c-3162-4d68-8b23-e0843f8fec9c/Actions/part-2018Q30808.csv?snapshot=2018-08-16T09%3A10%3A58.7560881Z","pbi:refreshBookmark":"8/8/2018 6:00:00 PM","pbi:source":{"$type":"RangePolicyPartitionSource","start":"2018-08-08T00:00:00","end":"2018-08-09T00:00:00"}},{"name":"IncrementalRefreshPolicyPartition-2018Q30809","location":"https://cdsaincrementalrefresh.blob.core.windows.net:443/afa6242c-3162-4d68-8b23-e0843f8fec9c/Actions/part-2018Q30809.csv?snapshot=2018-08-16T09%3A11%3A06.0189965Z","pbi:refreshBookmark":"8/9/2018 6:00:00 PM","pbi:source":{"$type":"RangePolicyPartitionSource","start":"2018-08-09T00:00:00","end":"2018-08-10T00:00:00"}},{"name":"IncrementalRefreshPolicyPartition-2018Q30810","location":"https://cdsaincrementalrefresh.blob.core.windows.net:443/afa6242c-3162-4d68-8b23-e0843f8fec9c/Actions/part-2018Q30810.csv?snapshot=2018-08-16T09%3A11%3A12.7884322Z","pbi:refreshBookmark":"8/10/2018 6:00:00 PM","pbi:source":{"$type":"RangePolicyPartitionSource","start":"2018-08-10T00:00:00","end":"2018-08-11T00:00:00"}},{"name":"IncrementalRefreshPolicyPartition-2018Q30811","location":"https://cdsaincrementalrefresh.blob.core.windows.net:443/afa6242c-3162-4d68-8b23-e0843f8fec9c/Actions/part-2018Q30811.csv?snapshot=2018-08-16T09%3A11%3A09.7885781Z","pbi:refreshBookmark":"8/11/2018 6:00:00 PM","pbi:source":{"$type":"RangePolicyPartitionSource","start":"2018-08-11T00:00:00","end":"2018-08-12T00:00:00"}},{"name":"IncrementalRefreshPolicyPartition-2018Q30812","location":"https://cdsaincrementalrefresh.blob.core.windows.net:443/afa6242c-3162-4d68-8b23-e0843f8fec9c/Actions/part-2018Q30812.csv?snapshot=2018-08-16T09%3A11%3A15.8713653Z","pbi:refreshBookmark":"8/12/2018 6:00:00 PM","pbi:source":{"$type":"RangePolicyPartitionSource","start":"2018-08-12T00:00:00","end":"2018-08-13T00:00:00"}},{"name":"IncrementalRefreshPolicyPartition-2018Q30813","location":"https://cdsaincrementalrefresh.blob.core.windows.net:443/afa6242c-3162-4d68-8b23-e0843f8fec9c/Actions/part-2018Q30813.csv?snapshot=2018-08-16T09%3A11%3A06.6165612Z","pbi:refreshBookmark":"8/13/2018 6:00:00 PM","pbi:source":{"$type":"RangePolicyPartitionSource","start":"2018-08-13T00:00:00","end":"2018-08-14T00:00:00"}},{"name":"IncrementalRefreshPolicyPartition-2018Q30814","location":"https://cdsaincrementalrefresh.blob.core.windows.net:443/afa6242c-3162-4d68-8b23-e0843f8fec9c/Actions/part-2018Q30814.csv?snapshot=2018-08-16T09%3A11%3A07.8757608Z","pbi:refreshBookmark":"8/14/2018 6:00:00 PM","pbi:source":{"$type":"RangePolicyPartitionSource","start":"2018-08-14T00:00:00","end":"2018-08-15T00:00:00"}},{"name":"IncrementalRefreshPolicyPartition-2018Q30815","location":"https://cdsaincrementalrefresh.blob.core.windows.net:443/afa6242c-3162-4d68-8b23-e0843f8fec9c/Actions/part-2018Q30815.csv?snapshot=2018-08-16T09%3A10%3A59.3816837Z","pbi:refreshBookmark":"8/15/2018 6:00:00 PM","pbi:source":{"$type":"RangePolicyPartitionSource","start":"2018-08-15T00:00:00","end":"2018-08-16T00:00:00"}}]},{"$type":"LocalEntity","name":"Orders","description":"","pbi:refreshPolicy":{"$type":"IncrementalRefreshPolicy","locationPattern":"Orders/part.csv","rollingWindowGranularity":"year","rollingWindowPeriods":2,"incrementalGranularity":"month","incrementalPeriods":1},"annotations":[{"name":"pbi:IncrementalRefreshDetectChangeAttribute"},{"name":"pbi:IncrementalRefreshFilterByAttribute","value":"OrderDate"}],"attributes":[{"name":"Id","dataType":"int64"},{"name":"ProductName","dataType":"string"},{"name":"OrderDate","dataType":"dateTime"},{"name":"ShippedDate","dataType":"dateTime"}],"partitions":[{"name":"IncrementalRefreshPolicyPartition-2016","location":"https://cdsaincrementalrefresh.blob.core.windows.net:443/afa6242c-3162-4d68-8b23-e0843f8fec9c/Orders/part-2016.csv?snapshot=2018-08-16T09%3A11%3A22.3885663Z","pbi:source":{"$type":"RangePolicyPartitionSource","start":"2016-01-01T00:00:00","end":"2017-01-01T00:00:00"}},{"name":"IncrementalRefreshPolicyPartition-2017","location":"https://cdsaincrementalrefresh.blob.core.windows.net:443/afa6242c-3162-4d68-8b23-e0843f8fec9c/Orders/part-2017.csv?snapshot=2018-08-16T09%3A11%3A21.7239356Z","pbi:source":{"$type":"RangePolicyPartitionSource","start":"2017-01-01T00:00:00","end":"2018-01-01T00:00:00"}},{"name":"IncrementalRefreshPolicyPartition-2018Q1","location":"https://cdsaincrementalrefresh.blob.core.windows.net:443/afa6242c-3162-4d68-8b23-e0843f8fec9c/Orders/part-2018Q1.csv?snapshot=2018-08-16T09%3A11%3A20.2565374Z","pbi:source":{"$type":"RangePolicyPartitionSource","start":"2018-01-01T00:00:00","end":"2018-04-01T00:00:00"}},{"name":"IncrementalRefreshPolicyPartition-2018Q2","location":"https://cdsaincrementalrefresh.blob.core.windows.net:443/afa6242c-3162-4d68-8b23-e0843f8fec9c/Orders/part-2018Q2.csv?snapshot=2018-08-16T09%3A11%3A21.3695964Z","pbi:source":{"$type":"RangePolicyPartitionSource","start":"2018-04-01T00:00:00","end":"2018-07-01T00:00:00"}},{"name":"IncrementalRefreshPolicyPartition-2018Q307","location":"https://cdsaincrementalrefresh.blob.core.windows.net:443/afa6242c-3162-4d68-8b23-e0843f8fec9c/Orders/part-2018Q307.csv?snapshot=2018-08-16T09%3A11%3A21.5817983Z","pbi:source":{"$type":"RangePolicyPartitionSource","start":"2018-07-01T00:00:00","end":"2018-08-01T00:00:00"}},{"name":"IncrementalRefreshPolicyPartition-2018Q308","location":"https://cdsaincrementalrefresh.blob.core.windows.net:443/afa6242c-3162-4d68-8b23-e0843f8fec9c/Orders/part-2018Q308.csv?snapshot=2018-08-16T09%3A22%3A14.3724443Z","pbi:source":{"$type":"RangePolicyPartitionSource","start":"2018-08-01T00:00:00","end":"2018-09-01T00:00:00"}}]},{"$type":"LocalEntity","name":"Customers","description":"","pbi:refreshPolicy":{"$type":"FullRefreshPolicy","location":"Customers.csv"},"attributes":[{"name":"CustomerID","dataType":"string"},{"name":"CompanyName","dataType":"string"},{"name":"ContactName","dataType":"string"},{"name":"ContactTitle","dataType":"string"},{"name":"Address","dataType":"string"},{"name":"City","dataType":"string"},{"name":"Region","dataType":"string"},{"name":"PostalCode","dataType":"string"},{"name":"Country","dataType":"string"},{"name":"Phone","dataType":"string"},{"name":"Fax","dataType":"string"}],"partitions":[{"name":"FullRefreshPolicyPartition","location":"https://cdsaincrementalrefresh.blob.core.windows.net:443/afa6242c-3162-4d68-8b23-e0843f8fec9c/Customers.csv?snapshot=2018-08-16T09%3A22%3A25.2086843Z"}]},{"$type":"LocalEntity","name":"Employees","description":"","pbi:refreshPolicy":{"$type":"FullRefreshPolicy","location":"Employees.csv"},"attributes":[{"name":"EmployeeID","dataType":"int64"},{"name":"LastName","dataType":"string"},{"name":"FirstName","dataType":"string"},{"name":"Title","dataType":"string"},{"name":"TitleOfCourtesy","dataType":"string"},{"name":"BirthDate","dataType":"dateTime"},{"name":"HireDate","dataType":"dateTime"},{"name":"Address","dataType":"string"},{"name":"City","dataType":"string"},{"name":"Region","dataType":"string"},{"name":"PostalCode","dataType":"string"},{"name":"Country","dataType":"string"},{"name":"HomePhone","dataType":"string"},{"name":"Extension","dataType":"string"},{"name":"Notes","dataType":"string"},{"name":"ReportsTo","dataType":"int64"},{"name":"PhotoPath","dataType":"string"}],"partitions":[{"name":"FullRefreshPolicyPartition","location":"https://cdsaincrementalrefresh.blob.core.windows.net:443/afa6242c-3162-4d68-8b23-e0843f8fec9c/Employees.csv?snapshot=2018-08-16T09%3A22%3A24.6581640Z"}]}]}
